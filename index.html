<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CodeX Ai | Super Smart Assistant</title>
  <style>
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: #0d0d0d;
      color: #fff;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      background: #1a1a1a;
      padding: 15px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      border-bottom: 1px solid #333;
    }
    .chat-container {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .msg {
      max-width: 70%;
      padding: 12px;
      border-radius: 12px;
      line-height: 1.5;
      word-wrap: break-word;
    }
    .user {
      align-self: flex-end;
      background: #00b894;
      border-bottom-right-radius: 2px;
    }
    .ai {
      align-self: flex-start;
      background: #2d2d2d;
      border-bottom-left-radius: 2px;
    }
    .input-area {
      display: flex;
      padding: 10px;
      background: #1a1a1a;
      border-top: 1px solid #333;
    }
    .input-area input {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      outline: none;
    }
    .input-area button {
      margin-left: 10px;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      background: #00b894;
      color: white;
      font-size: 14px;
      cursor: pointer;
      transition: 0.3s;
    }
    .input-area button:hover {
      background: #019875;
    }
    @media(max-width:600px){
      header { font-size: 16px; }
      .msg { max-width: 90%; font-size: 14px; }
    }
  </style>
</head>
<body>
  <header id="header">CodeX Ai</header>

  <div class="chat-container" id="chat"></div>

  <div class="input-area">
    <input type="text" id="userInput" placeholder="Type your message...">
    <button onclick="sendMsg()">Send</button>
  </div>

  <script>
    const username = localStorage.getItem("codexUser") || "Guest";
    document.getElementById("header").innerText = "Hello " + username + " 👋 | CodeX Ai";

    const chat = document.getElementById("chat");
    let memory = []; // ذاكرة المحادثة

    const knowledgeBase = {
      greetings: ["Hello! 🌍", "Hey " + username + "! 🚀", "Welcome back, ready to think big?"],
      tech: [
        "You can solve that with a function refactor 🔧.",
        "Sounds like an async issue — maybe try Promises or await?",
        "Debugging tip: isolate the smallest failing part of your code 🧩."
      ],
      analysis: [
        "Let’s break this problem step by step 🔍.",
        "From a high-level view, this system looks scalable.",
        "I suggest drawing a flowchart before coding 📊."
      ],
      motivation: [
        "Great minds don’t quit, and you’re on the right path! 💡",
        "Every error is a lesson, not a failure 🚀.",
        "You’re building knowledge with each attempt 🔥."
      ],
      creative: [
        "What if we combine AI with IoT sensors for smarter homes? 🏡",
        "Imagine an app that predicts mood from typing speed 🎭.",
        "That idea could evolve into a full research project 📚."
      ],
      facts: [
        "Did you know? The first computer bug was literally a moth 🦋.",
        "Fun fact: Your brain has ~86 billion neurons firing right now ⚡.",
        "AI doesn’t sleep, but it can still dream through simulations 🤖."
      ]
    };

    // توليد رد جديد ضخم
    function generateAIResponse(text){
      const lower = text.toLowerCase();
      let pool = [];

      if(lower.includes("hello") || lower.includes("hi") || lower.includes("hey")){
        pool = knowledgeBase.greetings;
      }
      else if(lower.includes("code") || lower.includes("error") || lower.includes("problem")){
        pool = knowledgeBase.tech;
      }
      else if(lower.includes("analyze") || lower.includes("explain") || lower.includes("analysis")){
        pool = knowledgeBase.analysis;
      }
      else if(lower.includes("motivate") || lower.includes("help me") || lower.includes("i'm tired")){
        pool = knowledgeBase.motivation;
      }
      else if(lower.includes("idea") || lower.includes("create") || lower.includes("invent")){
        pool = knowledgeBase.creative;
      }
      else if(lower.includes("fact") || lower.includes("tell me something")){
        pool = knowledgeBase.facts;
      }
      else {
        // fallback: يخترع رد جديد باستخدام كلمات عشوائية
        const starters = ["Interesting point,", "From another angle,", "If we imagine,", "One possibility,"];
        const middles = ["this could connect with AI logic", "the solution might be hidden in details", "we could invent a new approach", "there’s a bigger picture here"];
        const endings = ["let’s explore it further.", "worth experimenting with 🚀.", "could even be a breakthrough idea!", "what do you think?"];
        pool = [ starters[Math.floor(Math.random()*starters.length)] + " " +
                 middles[Math.floor(Math.random()*middles.length)] + " " +
                 endings[Math.floor(Math.random()*endings.length)] ];
      }

      return pool[Math.floor(Math.random() * pool.length)];
    }

    function addMsg(content, type){
      const div = document.createElement("div");
      div.className = "msg " + type;
      div.innerText = content;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }

    function sendMsg(){
      const input = document.getElementById("userInput");
      const text = input.value.trim();
      if(!text) return;
      addMsg(text, "user");
      memory.push({role:"user", content:text});
      input.value = "";

      setTimeout(()=>{
        const reply = generateAIResponse(text);
        addMsg(reply, "ai");
        memory.push({role:"ai", content:reply});
      }, 800);
    }
  </script>
</body>
</html>
